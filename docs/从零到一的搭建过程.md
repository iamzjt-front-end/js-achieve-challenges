<!-- TOC -->

- [ä»é›¶åˆ°ä¸€çš„æ­å»ºè¿‡ç¨‹](#ä»é›¶åˆ°ä¸€çš„æ­å»ºè¿‡ç¨‹)
_ [1. é¡¹ç›®åŸºç¡€ç›®å½•ç»“æ„](#1-é¡¹ç›®åŸºç¡€ç›®å½•ç»“æ„)
_ [2. é…ç½® .editorconfig](#2-é…ç½®-editorconfig)
_ [3. é…ç½® .gitignore](#3-é…ç½®-gitignore)
_ [4. å¼•å…¥ ESLint](#4-å¼•å…¥-eslint)
_ [5. å¼•å…¥ Prettier](#5-å¼•å…¥-prettier)
_ [6. å¼•å…¥ Husky](#6-å¼•å…¥-husky)
_ [7. å¼•å…¥ lint-staged](#7-å¼•å…¥-lint-staged)
_ [8. å¼•å…¥ commitlint](#8-å¼•å…¥-commitlint)
_ [9. å¼•å…¥ commitizen](#9-å¼•å…¥-commitizen)
_ [10. è‡ªå®šä¹‰ commitizen](#10-è‡ªå®šä¹‰-commitizen)
_ [11. å¼•å…¥ ts ç¯å¢ƒ](#11-å¼•å…¥-ts-ç¯å¢ƒ)
_ [12. å¼•å…¥ vitest](#12-å¼•å…¥-vitest)
_ [13. å¼•å…¥ Vitest UI](#13-å¼•å…¥-vitest-ui)
_ [14. æ·»åŠ  .eslintignore é…ç½®](#14-æ·»åŠ -eslintignore-é…ç½®)
_ [15. å‡ºç°çš„é—®é¢˜](#15-å‡ºç°çš„é—®é¢˜)
_ [16. å¼•å…¥ release-it](#16-å¼•å…¥-release-it)
<!-- TOC -->

# ä»é›¶åˆ°ä¸€çš„æ­å»ºè¿‡ç¨‹

### 1. é¡¹ç›®åŸºç¡€ç›®å½•ç»“æ„

.
â”œâ”€â”€ .husky
â”œâ”€â”€ docs
â”‚ â””â”€â”€ ä»é›¶åˆ°ä¸€çš„æ­å»ºè¿‡ç¨‹.md
â”œâ”€â”€ problems
â”‚ â””â”€â”€ 00001-warm-hello-world
â”‚ â”œâ”€â”€ answer.ts
â”‚ â”œâ”€â”€ info.yml
â”‚ â”œâ”€â”€ problem.md
â”‚ â”œâ”€â”€ problem.zh_CN.md
â”‚ â””â”€â”€ test.spec.ts
â”œâ”€â”€ site
â”‚ â””â”€â”€ index.html
â”œâ”€â”€ .cz-config.js
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierrc.js
â”œâ”€â”€ auto-imports.d.ts
â”œâ”€â”€ commitlint.config.js
â”œâ”€â”€ LICENSE
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vitest.config.js

### 2. é…ç½® .editorconfig

```editorconfig
# http://editorconfig.org
root = true

# è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨
[*]
charset = utf-8 # è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8
end_of_line = lf # æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)
indent_style = tab # ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰
indent_size = 2 # ç¼©è¿›å¤§å°
insert_final_newline = true # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ

# è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™
[*.md]
max_line_length = off # å…³é—­æœ€å¤§è¡Œé•¿åº¦é™åˆ¶
trim_trailing_whitespace = false # å…³é—­æœ«å°¾ç©ºæ ¼ä¿®å‰ª
```

### 3. é…ç½® .gitignore

```gitignore
# See https://help.github.com/ignore-files/ for more about ignoring files.

# dependencies

/node_modules
/.pnp
.pnp.js

# testing

/coverage

# production

/build

# misc

.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
```

### 4. å¼•å…¥ ESLint

```bash
pnpm init

pnpm add eslint

eslint --init
```

å¹¶åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
	"script": {
		"lint": "eslint . --ext .js,.ts --fix"
	}
}
```

å¹¶é…ç½® .eslintrc.js

```js
module.exports = {
	extends: ["eslint:recommended", "plugin:@typescript-eslint/recommended"],
	overrides: [
		{
			env: {
				node: true,
			},
			files: [".eslintrc.{js,cjs}"],
			parserOptions: {
				sourceType: "script",
			},
		},
	],
	parser: "@typescript-eslint/parser",
	parserOptions: {
		ecmaVersion: "latest",
		sourceType: "module",
	},
	plugins: ["@typescript-eslint"],
};
```

### 5. å¼•å…¥ Prettier

```bash
pnpm add prettier eslint-config-prettier eslint-plugin-prettier -D
```

å¹¶åœ¨ .eslintrc.js ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```js
module.exports = {
	extends: ["plugin:prettier/recommended"],
	plugins: ["prettier"],
	rules: {
		"prettier/prettier": "error",
	},
};
```

å¹¶æ·»åŠ  .prettierrc.js é…ç½®

```js
module.exports = {
	printWidth: 120, // æ¯è¡Œä»£ç é•¿åº¦ï¼ˆé»˜è®¤80ï¼‰
	tabWidth: 2, // tabç¼©è¿›å¤§å°, é»˜è®¤ä¸º2
	useTabs: true, // ä½¿ç”¨tabç¼©è¿›
	semi: true, // æœ«å°¾æ·»åŠ åˆ†å·
	singleQuote: false, // ä½¿ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·
	quoteProps: "as-needed", // ä»…åœ¨éœ€è¦æ—¶åœ¨å¯¹è±¡å±æ€§å‘¨å›´æ·»åŠ å¼•å·
	trailingComma: "all", // å¤šè¡Œæ—¶å°½å¯èƒ½æ‰“å°å°¾éšé€—å·
	bracketSpacing: true, // åœ¨å¯¹è±¡å­—é¢é‡å£°æ˜æ‰€ä½¿ç”¨çš„çš„èŠ±æ‹¬å·åï¼ˆ{ï¼‰å’Œå‰ï¼ˆ}ï¼‰è¾“å‡ºç©ºæ ¼
	arrowParens: "avoid", // åœ¨ç®­å¤´å‡½æ•°å‚æ•°å‘¨å›´åŒ…æ‹¬æ‹¬å·
};
```

å¹¶åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
	"script": {
		"prettier": "prettier --write ."
	}
}
```

### 6. å¼•å…¥ Husky

```bash
pnpm add husky -D

pnpm dlx husky-init
```

å¹¶åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
	"script": {
		"prepare": "npx only-allow pnpm && husky install"
	},
	"husky": {
		"hooks": {
			"pre-commit": "lint-staged",
			"commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
		}
	}
}
```

å¹¶æ·»åŠ  pre-commit å’Œ commit-msg é’©å­

```bash
npx husky add .husky/pre-commit "npx lint-staged"

npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"
```

### 7. å¼•å…¥ lint-staged

```bash
pnpm add lint-staged -D
```

å¹¶åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
	"lint-staged": {
		"*.{js,ts}": ["prettier --config .prettierrc.js --write", "eslint --cache --fix"]
	}
}
```

### 8. å¼•å…¥ commitlint

```bash
pnpm add @commitlint/cli @commitlint/config-conventional -D
```

å¹¶æ·»åŠ  commitlint.config.js è‡ªå®šä¹‰ è§„åˆ™é…ç½®

```js
/**
 * çº¦å®šgitæäº¤è§„èŒƒ
 * types:[ç©ºæ ¼]message
 * e.g. feat: è¿™æ˜¯ä¸€ä¸ªæ–°çš„feature
 */

const types = [
	"feat", // âœ¨ Features | æ–°åŠŸèƒ½
	"fix", // ğŸ› Bug Fixes | Bug ä¿®å¤
	"init", // ğŸ‰ Init | åˆå§‹åŒ–
	"docs", // âœï¸ Documentation | æ–‡æ¡£
	"style", // ğŸ’„ Styles | é£æ ¼
	"refactor", // â™»ï¸ Code Refactoring | ä»£ç é‡æ„
	"perf", // âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–
	"test", // âœ… Tests | æµ‹è¯•
	"revert", // âª Revert | å›é€€
	"build", // ğŸ“¦ Build System | æ‰“åŒ…æ„å»º
	"chore", // ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·
	"ci", // ğŸ‘· Continuous Integration | CI é…ç½®
	"release", // ğŸ¯ release | å‘å¸ƒ
];

const commitTypeRules = [2, "always", types];

module.exports = {
	extends: ["@commitlint/config-conventional"],
	rules: {
		"type-enum": commitTypeRules,
	},
};
```

### 9. å¼•å…¥ commitizen

```bash
pnpm add commitizen @commitlint/cz-commitlint inquirer@8 -D
```

å¹¶åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®

```json
{
	"script": {
		"commit": "git add . && cz"
	}
}
```

æ·»åŠ  cz-conventional-changelog é€‚é…å™¨

```bash
commitizen init cz-conventional-changelog --pnpm --save-dev --save-exact

# ä¸Šé¢è¿™è¡Œå‘½ä»¤å®é™…ä¸Šåšäº†ä¸‰ä»¶äº‹
# 1. å®‰è£… cz-conventional-changelog
# 2. å°†å…¶ä¿å­˜ package.json åˆ°çš„ devDependencies
# 3. åœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®
# {
# 	"config": {
# 		"commitizen": {
# 			"path": "cz-conventional-changelog"
# 		}
# 	}
# }
```

### 10. è‡ªå®šä¹‰ commitizen

```bash
pnpm add cz-customizable -D
```

æ·»åŠ  .cz-config.js é…ç½®

```js
module.exports = {
	// å¯é€‰ç±»å‹
	types: [
		{ value: "feat", name: "feat: âœ¨ Features | æ–°åŠŸèƒ½" },
		{ value: "fix", name: "fix: ğŸ› Bug Fixes | Bug ä¿®å¤" },
		{ value: "init", name: "init: ğŸ‰ Init | åˆå§‹åŒ–" },
		{ value: "docs", name: "docs: âœï¸ Documentation | æ–‡æ¡£" },
		{ value: "style", name: "style: ğŸ’„ Styles | é£æ ¼" },
		{ value: "refactor", name: "refactor: â™»ï¸ Code Refactoring | ä»£ç é‡æ„" },
		{ value: "perf", name: "perf: âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–" },
		{ value: "test", name: "test: âœ… Tests | æµ‹è¯•" },
		{ value: "revert", name: "revert: âª Revert | å›é€€" },
		{ value: "build", name: "build: ğŸ“¦ Build System | æ‰“åŒ…æ„å»º" },
		{ value: "chore", name: "chore: ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·" },
		{ value: "ci", name: "ci: ğŸ‘· Continuous Integration | CI é…ç½®" },
	],
	// æ¶ˆæ¯æ­¥éª¤
	messages: {
		type: "è¯·é€‰æ‹©æäº¤ç±»å‹:",
		customScope: "è¯·è¾“å…¥ä¿®æ”¹èŒƒå›´(å¯é€‰):",
		subject: "è¯·ç®€è¦æè¿°æäº¤(å¿…å¡«):",
		body: "è¯·è¾“å…¥è¯¦ç»†æè¿°(å¯é€‰):",
		footer: "è¯·è¾“å…¥è¦å…³é—­çš„issue(å¯é€‰):",
		confirmCommit: "ç¡®è®¤ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯æäº¤ï¼Ÿ(y/n/e/h)",
	},
	// è·³è¿‡é—®é¢˜
	skipQuestions: ["body", "footer"],
	// subjectæ–‡å­—é•¿åº¦é»˜è®¤æ˜¯72
	subjectLimit: 72,
};
```

å¹¶åœ¨ package.json ä¸­ä¿®æ”¹å¦‚ä¸‹é…ç½®

```json
{
	"script": {
		"commit": "git add . && ./node_modules/cz-customizable/standalone.js"
	},
	"config": {
		"commitizen": {
			"path": "node_modules/cz-customizable"
		},
		"cz-customizable": {
			"config": "config/path/to/my/config.js"
		}
	}
}
```

### 11. å¼•å…¥ ts ç¯å¢ƒ

```bash
pnpm add typescript @types/node -D

# åˆå§‹åŒ– tsconfig.json
tsc --init
```

é…ç½® tsconfig.json

```json
{
	"compilerOptions": {
		/* Visit https://aka.ms/tsconfig to read more about this file */
		"target": "ESNext",
		"module": "ESNext",
		"moduleResolution": "NodeNext",
		"esModuleInterop": true,
		"importHelpers": true,
		"skipLibCheck": true,
		"allowSyntheticDefaultImports": true,
		"forceConsistentCasingInFileNames": true,
		"sourceMap": true,
		"strict": true,
		"lib": ["ESNext"]
	},
	"include": ["problems/**/*.ts"]
}
```

### 12. å¼•å…¥ vitest

```bash
pnpm add vite -D
```

å¹¶æ·»åŠ  package.json é…ç½®

```json
{
	"script": {
		"test": "vite"
	}
}
```

å¹¶æ·»åŠ  vitest.config.ts é…ç½®

```ts
import { defineConfig } from "vitest/config";

export default defineConfig({
	test: {
		// æ·»åŠ å…¨å±€apiï¼Œç±»ä¼¼jest
		globals: true,
	},
});
```

ä¸ºäº†å¯ä»¥è®©å…¨å±€ API æ”¯æŒ Typescriptï¼Œè¯·å°† vitest/globals æ·»åŠ åˆ° tsconfig.json ä¸­çš„ types é€‰é¡¹ä¸­

```json
{
	"compilerOptions": {
		"types": ["vitest/globals"]
	}
}
```

é…ç½® unplugin-auto-import

```bash
pnpm add unplugin-auto-import -D
```

å¹¶æ·»åŠ  vitest.config.ts é…ç½®

```ts
import AutoImport from "unplugin-auto-import/vite";
import { defineConfig } from "vitest/config";

export default defineConfig({
	test: {
		// æ·»åŠ å…¨å±€apiï¼Œç±»ä¼¼jest
		globals: true,
	},
	plugins: [
		AutoImport({
			imports: ["vitest"],
			dts: true, // ç”Ÿæˆtså£°æ˜æ–‡ä»¶
		}),
	],
});
```

### 13. å¼•å…¥ Vitest UI

```bash
pnpm add @vitest/ui -D
```

å¹¶æ·»åŠ  package.json é…ç½®

```json
{
	"script": {
		"server": "vite --ui"
	}
}
```

### 14. æ·»åŠ  .eslintignore é…ç½®

```bash
.cz-config.js
.eslintrc.js
.prettierrc.js
commitlint.config.js
```

### 15. å‡ºç°çš„é—®é¢˜

åœ¨é¡¹ç›®æ­å»ºå®Œæˆåï¼Œè¿è¡Œ `pnpm lint` æ—¶ï¼Œä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯

```bash
WARNING: You are currently running a version of TypeScript which is not officially supported by @typescript-eslint/typescript-estree.

You may find that it works just fine, or you may not.

SUPPORTED TYPESCRIPT VERSIONS: >=3.3.1 <5.1.0

YOUR TYPESCRIPT VERSION: 5.1.6

Please only submit bug reports when using the officially supported version.
```

æ ¹æ®æç¤º ts ç‰ˆæœ¬è¿‡é«˜ï¼Œä¿®æ”¹ package.json ä¸­ `typescript` çš„ç‰ˆæœ¬ä¸º `~5.0.4`ï¼ŒåŒ¹é…ä¸»å‰¯ç‰ˆæœ¬å·

```json
{
	"devDependencies": {
		"typescript": "~5.0.4"
	}
}
```

### 16. å¼•å…¥ release-it

```bash
pnpm add release-it @release-it/conventional-changelog -D
```

å¹¶æ·»åŠ  package.json é…ç½®

```json
{
	"script": {
		"test-once": "vitest run",
		"release": "release-it"
	}
}
```

æ–°å¢ .release-it.json é…ç½®æ–‡ä»¶

```json
{
	"git": {
		"commitMessage": "chore(Release): v${version}",
		"tagName": "v${version}",
		"tagAnnotation": "Release v${version}"
	},
	"github": {
		"release": true,
		"preRelease": true,
		"releaseName": "v${version}",
		"tokenRef": "RELEASE_IT_TOKEN"
	},
	"npm": {
		"publish": false
	},
	"hooks": {
		"before:init": ["pnpm lint", "pnpm test-once"],
		"after:release": "echo âœ… SUCCESS! released: ${name} v${version} to ${repo.repository}."
	},
	"plugins": {
		"@release-it/conventional-changelog": {
			"infile": "CHANGELOG.md",
			"ignoreRecommendedBump": true,
			"strictSemVer": true,
			"preset": {
				"name": "conventionalcommits",
				"types": [
					{
						"type": "feat",
						"section": "âœ¨ Features | æ–°åŠŸèƒ½"
					},
					{
						"type": "fix",
						"section": "ğŸ› Bug Fixes | Bug ä¿®å¤"
					},
					{
						"type": "init",
						"section": "ğŸ‰ Init | åˆå§‹åŒ–"
					},
					{
						"type": "docs",
						"section": "âœï¸ Documentation | æ–‡æ¡£"
					},
					{
						"type": "style",
						"section": "ğŸ’„ Styles | é£æ ¼"
					},
					{
						"type": "refactor",
						"section": "â™»ï¸ Code Refactoring | ä»£ç é‡æ„"
					},
					{
						"type": "perf",
						"section": "âš¡ï¸ Performance Improvements | æ€§èƒ½ä¼˜åŒ–"
					},
					{
						"type": "test",
						"section": "âœ… Tests | æµ‹è¯•"
					},
					{
						"type": "revert",
						"section": "âª Revert | å›æ»š"
					},
					{
						"type": "build",
						"section": "ğŸ“¦ Build System | æ‰“åŒ…æ„å»º"
					},
					{
						"type": "chore",
						"section": "ğŸš€ Chore | æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·"
					},
					{
						"type": "ci",
						"section": "ğŸ‘· Continuous Integration | CI é…ç½®"
					},
					{
						"type": "release",
						"section": "ğŸ¯ release | å‘å¸ƒ"
					}
				]
			}
		}
	}
}
```
